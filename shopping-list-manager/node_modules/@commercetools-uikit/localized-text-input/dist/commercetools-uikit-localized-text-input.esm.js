import _Object$getOwnPropertySymbols from '@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols';
import _filterInstanceProperty from '@babel/runtime-corejs3/core-js-stable/instance/filter';
import _Object$getOwnPropertyDescriptor from '@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor';
import _forEachInstanceProperty from '@babel/runtime-corejs3/core-js-stable/instance/for-each';
import _Object$getOwnPropertyDescriptors from '@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors';
import _Object$defineProperties from '@babel/runtime-corejs3/core-js-stable/object/define-properties';
import _Object$defineProperty from '@babel/runtime-corejs3/core-js-stable/object/define-property';
import _slicedToArray from '@babel/runtime-corejs3/helpers/esm/slicedToArray';
import _defineProperty from '@babel/runtime-corejs3/helpers/esm/defineProperty';
import _pt from 'prop-types';
import _Object$keys from '@babel/runtime-corejs3/core-js-stable/object/keys';
import _mapInstanceProperty from '@babel/runtime-corejs3/core-js-stable/instance/map';
import { useCallback } from 'react';
import { FormattedMessage } from 'react-intl';
import { css } from '@emotion/react';
import { useToggleState, useFieldId } from '@commercetools-uikit/hooks';
import { ErrorMessage } from '@commercetools-uikit/messages';
import Stack from '@commercetools-uikit/spacings-stack';
import Constraints from '@commercetools-uikit/constraints';
import { sortLanguages, getHasErrorOnRemainingLanguages, createLocalizedDataAttributes, getId, getName, createLocalizedString, isEmpty, omitEmptyTranslations, isTouched } from '@commercetools-uikit/localized-utils';
import { createSequentialId, warning } from '@commercetools-uikit/utils';
import TextInput from '@commercetools-uikit/text-input';
import { LocalizedInputToggle, messagesLocalizedInput } from '@commercetools-uikit/input-utils';
import { designTokens } from '@commercetools-uikit/design-system';
import { jsx, jsxs } from '@emotion/react/jsx-runtime';

function _EMOTION_STRINGIFIED_CSS_ERROR__$1() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }
var _ref$1 = process.env.NODE_ENV === "production" ? {
  name: "1ps4mw6",
  styles: "border-top-left-radius:0;border-bottom-left-radius:0;border-style:solid;flex:auto"
} : {
  name: "bqcila-getLocalizedInputStyles",
  styles: "border-top-left-radius:0;border-bottom-left-radius:0;border-style:solid;flex:auto;label:getLocalizedInputStyles;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2FsaXplZC10ZXh0LWlucHV0LnN0eWxlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFTSyIsImZpbGUiOiJsb2NhbGl6ZWQtdGV4dC1pbnB1dC5zdHlsZXMudHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5pbXBvcnQgeyBkZXNpZ25Ub2tlbnMgfSBmcm9tICdAY29tbWVyY2V0b29scy11aWtpdC9kZXNpZ24tc3lzdGVtJztcbmltcG9ydCB0eXBlIHsgVExvY2FsaXplZElucHV0UHJvcHMgfSBmcm9tICcuL2xvY2FsaXplZC10ZXh0LWlucHV0JztcblxuLy8gTk9URTogb3JkZXIgaXMgaW1wb3J0YW50IGhlcmVcbi8vICogYSBkaXNhYmxlZC1maWVsZCBjdXJyZW50bHkgZG9lcyBub3QgZGlzcGxheSB3YXJuaW5nL2Vycm9yLXN0YXRlcyBzbyBpdCB0YWtlcyBwcmVjZWRlbmNlXG4vLyAqIGEgcmVhZG9ubHktZmllbGQgY2Fubm90IGJlIGNoYW5nZWQsIGJ1dCBpdCBtaWdodCBiZSByZWxldmFudCBmb3IgdmFsaWRhdGlvbiwgc28gZXJyb3IgYW5kIHdhcm5pbmcgYXJlIGNoZWNrZWQgZmlyc3Rcbi8vIGhvdyB5b3UgY2FuIGludGVyYWN0IHdpdGggdGhlIGZpZWxkIGlzIGNvbnRyb2xsZWQgc2VwYXJhdGVseSBieSB0aGUgcHJvcHMsIHRoaXMgb25seSBpbmZsdWVuY2VzIHZpc3VhbHNcbmNvbnN0IGdldExvY2FsaXplZElucHV0U3R5bGVzID0gKCkgPT4gW1xuICBjc3NgXG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDtcbiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwO1xuICAgIGJvcmRlci1zdHlsZTogc29saWQ7XG4gICAgZmxleDogYXV0bztcbiAgYCxcbl07XG5cbmNvbnN0IGdldExhbmd1YWdlTGFiZWxCYWNrZ3JvdW5kQ29sb3IgPSAocHJvcHM6IFRMb2NhbGl6ZWRJbnB1dFByb3BzKSA9PiB7XG4gIGlmIChwcm9wcy5pc0Rpc2FibGVkKSB7XG4gICAgcmV0dXJuIGRlc2lnblRva2Vucy5iYWNrZ3JvdW5kQ29sb3JGb3JMb2NhbGl6ZWRJbnB1dExhYmVsV2hlbkRpc2FibGVkO1xuICB9XG4gIGlmIChwcm9wcy5pc1JlYWRPbmx5KSB7XG4gICAgcmV0dXJuIGRlc2lnblRva2Vucy5iYWNrZ3JvdW5kQ29sb3JGb3JMb2NhbGl6ZWRJbnB1dExhYmVsV2hlblJlYWRvbmx5O1xuICB9XG4gIHJldHVybiBkZXNpZ25Ub2tlbnMuYmFja2dyb3VuZENvbG9yRm9yTG9jYWxpemVkSW5wdXRMYWJlbDtcbn07XG5cbmNvbnN0IGdldExhbmd1YWdlTGFiZWxCb3JkZXJDb2xvciA9IChwcm9wczogVExvY2FsaXplZElucHV0UHJvcHMpID0+IHtcbiAgaWYgKHByb3BzLmlzRGlzYWJsZWQpIHtcbiAgICByZXR1cm4gZGVzaWduVG9rZW5zLmJvcmRlckNvbG9yRm9ySW5wdXRXaGVuRGlzYWJsZWQ7XG4gIH1cbiAgcmV0dXJuIHByb3BzLmlzUmVhZE9ubHlcbiAgICA/IGRlc2lnblRva2Vucy5ib3JkZXJDb2xvckZvckxvY2FsaXplZElucHV0TGFiZWxXaGVuUmVhZG9ubHlcbiAgICA6IGRlc2lnblRva2Vucy5ib3JkZXJDb2xvckZvckxvY2FsaXplZElucHV0TGFiZWw7XG59O1xuXG5jb25zdCBnZXRMYW5ndWFnZUxhYmVsU3R5bGVzID0gKHByb3BzOiBUTG9jYWxpemVkSW5wdXRQcm9wcykgPT4ge1xuICByZXR1cm4gY3NzYFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAvKiBhdm9pZCB3cmFwcGluZyBsYWJlbCBvbnRvIG5ldyBsaW5lcyAqL1xuICAgIGZsZXg6IDEgMCBhdXRvO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgY29sb3I6ICR7ZGVzaWduVG9rZW5zLmZvbnRDb2xvckZvckxvY2FsaXplZElucHV0TGFiZWx9O1xuICAgIGN1cnNvcjogJHtwcm9wcy5pc0Rpc2FibGVkID8gJ25vdC1hbGxvd2VkJyA6ICdkZWZhdWx0J307XG4gICAgaGVpZ2h0OiAke2Rlc2lnblRva2Vucy5oZWlnaHRGb3JJbnB1dH07XG4gICAgZm9udC1zaXplOiAke2Rlc2lnblRva2Vucy5mb250U2l6ZUZvckxvY2FsaXplZElucHV0TGFiZWx9O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7Z2V0TGFuZ3VhZ2VMYWJlbEJhY2tncm91bmRDb2xvcihwcm9wcyl9O1xuICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6ICR7ZGVzaWduVG9rZW5zLmJvcmRlclJhZGl1c0ZvcklucHV0fTtcbiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAke2Rlc2lnblRva2Vucy5ib3JkZXJSYWRpdXNGb3JJbnB1dH07XG4gICAgYm9yZGVyOiAxcHggc29saWQgJHtnZXRMYW5ndWFnZUxhYmVsQm9yZGVyQ29sb3IocHJvcHMpfTtcbiAgICBwYWRkaW5nOiAke2Rlc2lnblRva2Vucy5wYWRkaW5nRm9yTG9jYWxpemVkSW5wdXRMYWJlbH07XG4gICAgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yICR7ZGVzaWduVG9rZW5zLnRyYW5zaXRpb25TdGFuZGFyZH0sXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yICR7ZGVzaWduVG9rZW5zLnRyYW5zaXRpb25TdGFuZGFyZH0sXG4gICAgICBjb2xvciAke2Rlc2lnblRva2Vucy50cmFuc2l0aW9uU3RhbmRhcmR9O1xuICAgIGJvcmRlci1yaWdodDogMDtcbiAgICBib3gtc2hhZG93OiBub25lO1xuICAgIGFwcGVhcmFuY2U6IG5vbmU7XG4gIGA7XG59O1xuXG5leHBvcnQgeyBnZXRMb2NhbGl6ZWRJbnB1dFN0eWxlcywgZ2V0TGFuZ3VhZ2VMYWJlbFN0eWxlcyB9O1xuIl19 */",
  toString: _EMOTION_STRINGIFIED_CSS_ERROR__$1
};
// NOTE: order is important here
// * a disabled-field currently does not display warning/error-states so it takes precedence
// * a readonly-field cannot be changed, but it might be relevant for validation, so error and warning are checked first
// how you can interact with the field is controlled separately by the props, this only influences visuals
const getLocalizedInputStyles = () => [_ref$1];
const getLanguageLabelBackgroundColor = props => {
  if (props.isDisabled) {
    return designTokens.backgroundColorForLocalizedInputLabelWhenDisabled;
  }
  if (props.isReadOnly) {
    return designTokens.backgroundColorForLocalizedInputLabelWhenReadonly;
  }
  return designTokens.backgroundColorForLocalizedInputLabel;
};
const getLanguageLabelBorderColor = props => {
  if (props.isDisabled) {
    return designTokens.borderColorForInputWhenDisabled;
  }
  return props.isReadOnly ? designTokens.borderColorForLocalizedInputLabelWhenReadonly : designTokens.borderColorForLocalizedInputLabel;
};
const getLanguageLabelStyles = props => {
  return /*#__PURE__*/css("display:flex;flex-direction:column;justify-content:center;flex:1 0 auto;box-sizing:border-box;color:", designTokens.fontColorForLocalizedInputLabel, ";cursor:", props.isDisabled ? 'not-allowed' : 'default', ";height:", designTokens.heightForInput, ";font-size:", designTokens.fontSizeForLocalizedInputLabel, ";background-color:", getLanguageLabelBackgroundColor(props), ";border-top-left-radius:", designTokens.borderRadiusForInput, ";border-bottom-left-radius:", designTokens.borderRadiusForInput, ";border:1px solid ", getLanguageLabelBorderColor(props), ";padding:", designTokens.paddingForLocalizedInputLabel, ";transition:border-color ", designTokens.transitionStandard, ",background-color ", designTokens.transitionStandard, ",color ", designTokens.transitionStandard, ";border-right:0;box-shadow:none;appearance:none;" + (process.env.NODE_ENV === "production" ? "" : ";label:getLanguageLabelStyles;"), process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2FsaXplZC10ZXh0LWlucHV0LnN0eWxlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxQ1kiLCJmaWxlIjoibG9jYWxpemVkLXRleHQtaW5wdXQuc3R5bGVzLnRzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IHsgZGVzaWduVG9rZW5zIH0gZnJvbSAnQGNvbW1lcmNldG9vbHMtdWlraXQvZGVzaWduLXN5c3RlbSc7XG5pbXBvcnQgdHlwZSB7IFRMb2NhbGl6ZWRJbnB1dFByb3BzIH0gZnJvbSAnLi9sb2NhbGl6ZWQtdGV4dC1pbnB1dCc7XG5cbi8vIE5PVEU6IG9yZGVyIGlzIGltcG9ydGFudCBoZXJlXG4vLyAqIGEgZGlzYWJsZWQtZmllbGQgY3VycmVudGx5IGRvZXMgbm90IGRpc3BsYXkgd2FybmluZy9lcnJvci1zdGF0ZXMgc28gaXQgdGFrZXMgcHJlY2VkZW5jZVxuLy8gKiBhIHJlYWRvbmx5LWZpZWxkIGNhbm5vdCBiZSBjaGFuZ2VkLCBidXQgaXQgbWlnaHQgYmUgcmVsZXZhbnQgZm9yIHZhbGlkYXRpb24sIHNvIGVycm9yIGFuZCB3YXJuaW5nIGFyZSBjaGVja2VkIGZpcnN0XG4vLyBob3cgeW91IGNhbiBpbnRlcmFjdCB3aXRoIHRoZSBmaWVsZCBpcyBjb250cm9sbGVkIHNlcGFyYXRlbHkgYnkgdGhlIHByb3BzLCB0aGlzIG9ubHkgaW5mbHVlbmNlcyB2aXN1YWxzXG5jb25zdCBnZXRMb2NhbGl6ZWRJbnB1dFN0eWxlcyA9ICgpID0+IFtcbiAgY3NzYFxuICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDA7XG4gICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDtcbiAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgIGZsZXg6IGF1dG87XG4gIGAsXG5dO1xuXG5jb25zdCBnZXRMYW5ndWFnZUxhYmVsQmFja2dyb3VuZENvbG9yID0gKHByb3BzOiBUTG9jYWxpemVkSW5wdXRQcm9wcykgPT4ge1xuICBpZiAocHJvcHMuaXNEaXNhYmxlZCkge1xuICAgIHJldHVybiBkZXNpZ25Ub2tlbnMuYmFja2dyb3VuZENvbG9yRm9yTG9jYWxpemVkSW5wdXRMYWJlbFdoZW5EaXNhYmxlZDtcbiAgfVxuICBpZiAocHJvcHMuaXNSZWFkT25seSkge1xuICAgIHJldHVybiBkZXNpZ25Ub2tlbnMuYmFja2dyb3VuZENvbG9yRm9yTG9jYWxpemVkSW5wdXRMYWJlbFdoZW5SZWFkb25seTtcbiAgfVxuICByZXR1cm4gZGVzaWduVG9rZW5zLmJhY2tncm91bmRDb2xvckZvckxvY2FsaXplZElucHV0TGFiZWw7XG59O1xuXG5jb25zdCBnZXRMYW5ndWFnZUxhYmVsQm9yZGVyQ29sb3IgPSAocHJvcHM6IFRMb2NhbGl6ZWRJbnB1dFByb3BzKSA9PiB7XG4gIGlmIChwcm9wcy5pc0Rpc2FibGVkKSB7XG4gICAgcmV0dXJuIGRlc2lnblRva2Vucy5ib3JkZXJDb2xvckZvcklucHV0V2hlbkRpc2FibGVkO1xuICB9XG4gIHJldHVybiBwcm9wcy5pc1JlYWRPbmx5XG4gICAgPyBkZXNpZ25Ub2tlbnMuYm9yZGVyQ29sb3JGb3JMb2NhbGl6ZWRJbnB1dExhYmVsV2hlblJlYWRvbmx5XG4gICAgOiBkZXNpZ25Ub2tlbnMuYm9yZGVyQ29sb3JGb3JMb2NhbGl6ZWRJbnB1dExhYmVsO1xufTtcblxuY29uc3QgZ2V0TGFuZ3VhZ2VMYWJlbFN0eWxlcyA9IChwcm9wczogVExvY2FsaXplZElucHV0UHJvcHMpID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgLyogYXZvaWQgd3JhcHBpbmcgbGFiZWwgb250byBuZXcgbGluZXMgKi9cbiAgICBmbGV4OiAxIDAgYXV0bztcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGNvbG9yOiAke2Rlc2lnblRva2Vucy5mb250Q29sb3JGb3JMb2NhbGl6ZWRJbnB1dExhYmVsfTtcbiAgICBjdXJzb3I6ICR7cHJvcHMuaXNEaXNhYmxlZCA/ICdub3QtYWxsb3dlZCcgOiAnZGVmYXVsdCd9O1xuICAgIGhlaWdodDogJHtkZXNpZ25Ub2tlbnMuaGVpZ2h0Rm9ySW5wdXR9O1xuICAgIGZvbnQtc2l6ZTogJHtkZXNpZ25Ub2tlbnMuZm9udFNpemVGb3JMb2NhbGl6ZWRJbnB1dExhYmVsfTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2dldExhbmd1YWdlTGFiZWxCYWNrZ3JvdW5kQ29sb3IocHJvcHMpfTtcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAke2Rlc2lnblRva2Vucy5ib3JkZXJSYWRpdXNGb3JJbnB1dH07XG4gICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogJHtkZXNpZ25Ub2tlbnMuYm9yZGVyUmFkaXVzRm9ySW5wdXR9O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICR7Z2V0TGFuZ3VhZ2VMYWJlbEJvcmRlckNvbG9yKHByb3BzKX07XG4gICAgcGFkZGluZzogJHtkZXNpZ25Ub2tlbnMucGFkZGluZ0ZvckxvY2FsaXplZElucHV0TGFiZWx9O1xuICAgIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAke2Rlc2lnblRva2Vucy50cmFuc2l0aW9uU3RhbmRhcmR9LFxuICAgICAgYmFja2dyb3VuZC1jb2xvciAke2Rlc2lnblRva2Vucy50cmFuc2l0aW9uU3RhbmRhcmR9LFxuICAgICAgY29sb3IgJHtkZXNpZ25Ub2tlbnMudHJhbnNpdGlvblN0YW5kYXJkfTtcbiAgICBib3JkZXItcmlnaHQ6IDA7XG4gICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICBhcHBlYXJhbmNlOiBub25lO1xuICBgO1xufTtcblxuZXhwb3J0IHsgZ2V0TG9jYWxpemVkSW5wdXRTdHlsZXMsIGdldExhbmd1YWdlTGFiZWxTdHlsZXMgfTtcbiJdfQ== */");
};

function ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); enumerableOnly && (symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var _context, _context2; var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? _forEachInstanceProperty(_context = ownKeys(Object(source), !0)).call(_context, function (key) { _defineProperty(target, key, source[key]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)) : _forEachInstanceProperty(_context2 = ownKeys(Object(source))).call(_context2, function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } return target; }
function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }
const sequentialId = createSequentialId('localized-text-input-');
var _ref = process.env.NODE_ENV === "production" ? {
  name: "1ktetz7",
  styles: "width:100%;position:relative;display:flex"
} : {
  name: "1ysn02y-LocalizedInput",
  styles: "width:100%;position:relative;display:flex;label:LocalizedInput;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2FsaXplZC10ZXh0LWlucHV0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0TGMiLCJmaWxlIjoibG9jYWxpemVkLXRleHQtaW5wdXQudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdHlwZSBGb2N1c0V2ZW50SGFuZGxlcixcbiAgdHlwZSBDaGFuZ2VFdmVudEhhbmRsZXIsXG4gIHVzZUNhbGxiYWNrLFxufSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlIH0gZnJvbSAncmVhY3QtaW50bCc7XG5pbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5pbXBvcnQgeyB1c2VGaWVsZElkLCB1c2VUb2dnbGVTdGF0ZSB9IGZyb20gJ0Bjb21tZXJjZXRvb2xzLXVpa2l0L2hvb2tzJztcbmltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gJ0Bjb21tZXJjZXRvb2xzLXVpa2l0L21lc3NhZ2VzJztcbmltcG9ydCBTdGFjayBmcm9tICdAY29tbWVyY2V0b29scy11aWtpdC9zcGFjaW5ncy1zdGFjayc7XG5pbXBvcnQgQ29uc3RyYWludHMgZnJvbSAnQGNvbW1lcmNldG9vbHMtdWlraXQvY29uc3RyYWludHMnO1xuaW1wb3J0IHtcbiAgc29ydExhbmd1YWdlcyxcbiAgY3JlYXRlTG9jYWxpemVkRGF0YUF0dHJpYnV0ZXMsXG4gIGdldEhhc0Vycm9yT25SZW1haW5pbmdMYW5ndWFnZXMsXG4gIGlzVG91Y2hlZCxcbiAgb21pdEVtcHR5VHJhbnNsYXRpb25zLFxuICBpc0VtcHR5LFxuICBjcmVhdGVMb2NhbGl6ZWRTdHJpbmcsXG4gIGdldElkLFxuICBnZXROYW1lLFxufSBmcm9tICdAY29tbWVyY2V0b29scy11aWtpdC9sb2NhbGl6ZWQtdXRpbHMnO1xuaW1wb3J0IHsgY3JlYXRlU2VxdWVudGlhbElkLCB3YXJuaW5nIH0gZnJvbSAnQGNvbW1lcmNldG9vbHMtdWlraXQvdXRpbHMnO1xuaW1wb3J0IFRleHRJbnB1dCBmcm9tICdAY29tbWVyY2V0b29scy11aWtpdC90ZXh0LWlucHV0JztcbmltcG9ydCB7XG4gIExvY2FsaXplZElucHV0VG9nZ2xlLFxuICBtZXNzYWdlc0xvY2FsaXplZElucHV0LFxufSBmcm9tICdAY29tbWVyY2V0b29scy11aWtpdC9pbnB1dC11dGlscyc7XG5pbXBvcnQge1xuICBnZXRMb2NhbGl6ZWRJbnB1dFN0eWxlcyxcbiAgZ2V0TGFuZ3VhZ2VMYWJlbFN0eWxlcyxcbn0gZnJvbSAnLi9sb2NhbGl6ZWQtdGV4dC1pbnB1dC5zdHlsZXMnO1xuXG5pbnRlcmZhY2UgSFRNTExvY2FsaXplZElucHV0RWxlbWVudCBleHRlbmRzIEhUTUxJbnB1dEVsZW1lbnQge1xuICBsYW5ndWFnZTogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBUTG9jYWxpemVkVGV4dElucHV0UHJvcHMgPSB7XG4gIGlkPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBhdXRvQ29tcGxldGU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBJbmRpY2F0ZSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpbiB0aGUgaW5wdXQgaXMgaW52YWxpZC5cbiAgICovXG4gICdhcmlhLWludmFsaWQnPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEhUTUwgSUQgb2YgYW4gZWxlbWVudCBjb250YWluaW5nIGFuIGVycm9yIG1lc3NhZ2UgcmVsYXRlZCB0byB0aGUgaW5wdXQuXG4gICAqL1xuICAnYXJpYS1lcnJvcm1lc3NhZ2UnPzogc3RyaW5nO1xuICAvKipcbiAgICogICB0aGVuIGlucHV0IGRvZXNuJ3QgYWNjZXB0IGEgXCJsYW5ndWFnZXNcIiBwcm9wLCBpbnN0ZWFkIGFsbCBwb3NzaWJsZVxuICBsYW5ndWFnZXMgaGF2ZSB0byBleGlzdCAod2l0aCBlbXB0eSBvciBmaWxsZWQgc3RyaW5ncykgb24gdGhlIHZhbHVlOlxuICAgIHsgZW46ICdmb28nLCBkZTogJycsIGVzOiAnJyB9XG4gICAqL1xuICB2YWx1ZTogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gYW55IGlucHV0IGlzIGNoYW5nZWQuIElzIGNhbGxlZCB3aXRoIHRoZSBjaGFuZ2UgZXZlbnQgb2YgdGhlIGNoYW5nZWQgaW5wdXQuXG4gICAqL1xuICBvbkNoYW5nZT86IENoYW5nZUV2ZW50SGFuZGxlcjxIVE1MTG9jYWxpemVkSW5wdXRFbGVtZW50PjtcbiAgLyoqXG4gICAqIFNwZWNpZmllcyB3aGljaCBsYW5ndWFnZSB3aWxsIGJlIHNob3duIGluIGNhc2UgdGhlIGBMb2NhbGl6ZWRUZXh0SW5wdXRgIGlzIGNvbGxhcHNlZC5cbiAgICovXG4gIHNlbGVjdGVkTGFuZ3VhZ2U6IHN0cmluZztcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGFueSBmaWVsZCBpcyBibHVycmVkLiBJcyBjYWxsZWQgd2l0aCB0aGUgYGV2ZW50YCBvZiB0aGF0IGZpZWxkLlxuICAgKi9cbiAgb25CbHVyPzogRm9jdXNFdmVudEhhbmRsZXI8SFRNTElucHV0RWxlbWVudD47XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhbnkgZmllbGQgaXMgZm9jdXNzZWQuIElzIGNhbGxlZCB3aXRoIHRoZSBgZXZlbnRgIG9mIHRoYXQgZmllbGQuXG4gICAqL1xuICBvbkZvY3VzPzogRm9jdXNFdmVudEhhbmRsZXI8SFRNTElucHV0RWxlbWVudD47XG4gIC8qKlxuICAgKiBXaWxsIGhpZGUgdGhlIGxhbmd1YWdlIGV4cGFuc2lvbiBjb250cm9scyB3aGVuIHNldCB0byBgdHJ1ZWAuIEFsbCBsYW5ndWFnZXMgd2lsbCBiZSBzaG93biB3aGVuIHNldCB0byBgdHJ1ZWAuXG4gICAqL1xuICBoaWRlTGFuZ3VhZ2VFeHBhbnNpb25Db250cm9scz86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBDb250cm9scyB3aGV0aGVyIG9uZSBvciBhbGwgbGFuZ3VhZ2VzIGFyZSB2aXNpYmxlIGJ5IGRlZmF1bHRcbiAgICovXG4gIGRlZmF1bHRFeHBhbmRMYW5ndWFnZXM/OiBib29sZWFuO1xuICAvKipcbiAgICogRm9jdXMgdGhlIGlucHV0IGZpZWxkIG9uIGluaXRpYWwgcmVuZGVyXG4gICAqL1xuICBpc0F1dG9mb2N1c3NlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBEaXNhYmxlcyBhbGwgaW5wdXQgZmllbGRzLlxuICAgKi9cbiAgaXNEaXNhYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBEaXNhYmxlcyBhbGwgaW5wdXQgZmllbGRzIGFuZCBzaG93cyB0aGVtIGluIHJlYWQtb25seSBtb2RlLlxuICAgKi9cbiAgaXNSZWFkT25seT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBQbGFjZWhvbGRlcnMgZm9yIGVhY2ggbGFuZ3VhZ2UuIE9iamVjdCBvZiB0aGUgc2FtZSBzaGFwZSBhcyBgdmFsdWVgLlxuICAgKi9cbiAgcGxhY2Vob2xkZXI/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAvKipcbiAgICogSG9yaXpvbnRhbCBzaXplIGxpbWl0IG9mIHRoZSBpbnB1dCBmaWVsZHMuXG4gICAqL1xuICBob3Jpem9udGFsQ29uc3RyYWludD86XG4gICAgfCAxXG4gICAgfCAyXG4gICAgfCAzXG4gICAgfCA0XG4gICAgfCA1XG4gICAgfCA2XG4gICAgfCA3XG4gICAgfCA4XG4gICAgfCA5XG4gICAgfCAxMFxuICAgIHwgMTFcbiAgICB8IDEyXG4gICAgfCAxM1xuICAgIHwgMTRcbiAgICB8IDE1XG4gICAgfCAxNlxuICAgIHwgJ3NjYWxlJ1xuICAgIHwgJ2F1dG8nO1xuICAvKipcbiAgICogV2lsbCBhcHBseSB0aGUgZXJyb3Igc3RhdGUgdG8gZWFjaCBpbnB1dCB3aXRob3V0IHNob3dpbmcgYW55IGVycm9yIG1lc3NhZ2UuXG4gICAqL1xuICBoYXNFcnJvcj86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBVc2VkIHRvIHNob3cgZXJyb3JzIHVuZGVybmVhdGggdGhlIGlucHV0cyBvZiBzcGVjaWZpYyBjdXJyZW5jaWVzLiBQYXNzIGFuIG9iamVjdCB3aG9zZSBrZXkgaXMgYSBjdXJyZW5jeSBhbmQgd2hvc2UgdmFsdWUgaXMgdGhlIGVycm9yIHRvIHNob3cgZm9yIHRoYXQga2V5LlxuICAgKi9cbiAgZXJyb3JzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn07XG5cbmV4cG9ydCB0eXBlIFRMb2NhbGl6ZWRJbnB1dFByb3BzID0ge1xuICAvKipcbiAgICogVXNlZCBhcyBwcmVmaXggb2YgSFRNTCBgaWRgIHByb3BlcnR5LiBFYWNoIGlucHV0IGZpZWxkIGlkIHdpbGwgaGF2ZSB0aGUgbGFuZ3VhZ2UgYXMgYSBzdWZmaXggKGAke2lkUHJlZml4fS4ke2xhbmd9YCksIGUuZy4gYGZvby5lbmAuIFlvdSBjYW4gdXNlIHRoZSBzdGF0aWMgYExvY2FsaXplZFRleHRJbnB1dC5nZXRJZChpZFByZWZpeCwgbGFuZ3VhZ2UpYCB0byBjcmVhdGUgdGhpcyBpZCBzdHJpbmcsIGUuZy4gZm9yIGxhYmVscy5cbiAgICovXG4gIGlkPzogc3RyaW5nO1xuICAvKipcbiAgICogVXNlZCBhcyBIVE1MIGBuYW1lYCBwcm9wZXJ0eSBmb3IgZWFjaCBpbnB1dCBmaWVsZC4gRWFjaCBpbnB1dCBmaWVsZCBuYW1lIHdpbGwgaGF2ZSB0aGUgbGFuZ3VhZ2UgYXMgYSBzdWZmaXggKGAke25hbWVQcmVmaXh9LiR7bGFuZ31gKSwgZS5nLiBgZm9vLmVuYFxuICAgKi9cbiAgbmFtZT86IHN0cmluZztcbiAgLyoqXG4gICAqIFVzZWQgYXMgSFRNTCBgYXV0b2NvbXBsZXRlYCBwcm9wZXJ0eVxuICAgKi9cbiAgYXV0b0NvbXBsZXRlPzogc3RyaW5nO1xuICB2YWx1ZTogc3RyaW5nO1xuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiBhbnkgaW5wdXQgaXMgY2hhbmdlZC4gSXMgY2FsbGVkIHdpdGggdGhlIGNoYW5nZSBldmVudCBvZiB0aGUgY2hhbmdlZCBpbnB1dC5cbiAgICovXG4gIG9uQ2hhbmdlPzogQ2hhbmdlRXZlbnRIYW5kbGVyPEhUTUxMb2NhbGl6ZWRJbnB1dEVsZW1lbnQ+O1xuICBsYW5ndWFnZTogc3RyaW5nO1xuICBvbkJsdXI/OiBGb2N1c0V2ZW50SGFuZGxlcjxIVE1MSW5wdXRFbGVtZW50PjtcbiAgb25Gb2N1cz86IEZvY3VzRXZlbnRIYW5kbGVyPEhUTUxJbnB1dEVsZW1lbnQ+O1xuICBpc0F1dG9mb2N1c3NlZD86IGJvb2xlYW47XG4gIGlzRGlzYWJsZWQ/OiBib29sZWFuO1xuICBpc1JlYWRPbmx5PzogYm9vbGVhbjtcbiAgaGFzRXJyb3I/OiBib29sZWFuO1xuICBwbGFjZWhvbGRlcj86IHN0cmluZztcbn07XG5cbmNvbnN0IHNlcXVlbnRpYWxJZCA9IGNyZWF0ZVNlcXVlbnRpYWxJZCgnbG9jYWxpemVkLXRleHQtaW5wdXQtJyk7XG5cbmNvbnN0IExvY2FsaXplZElucHV0ID0gKHByb3BzOiBUTG9jYWxpemVkSW5wdXRQcm9wcykgPT4ge1xuICBjb25zdCB7IG9uQ2hhbmdlIH0gPSBwcm9wcztcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gdXNlQ2FsbGJhY2soXG4gICAgKGV2ZW50KSA9PiB7XG4gICAgICAvLyBXZSBtYW5pcHVsYXRlIHRoZSBldmVudCB0byBhZGQgdGhlIGxhbmd1YWdlIHRvIHRoZSB0YXJnZXQuXG4gICAgICAvLyBUaGF0IHdheSB0aGUgdXNlcnMgb2YgTG9jYWxpemVkVGV4dElucHV0J3Mgb25DaGFuZ2UgY2FuIHJlYWRcbiAgICAgIC8vIGV2ZW50LnRhcmdldC5sYW5ndWFnZSBhbmQgZXZlbnQudGFyZ2V0LnZhbHVlIHRvIGRldGVybWluZSB0aGUgbmV4dCB2YWx1ZS5cbiAgICAgIC8vXG4gICAgICAvLyBXZSBvbmx5IG5lZWQgdGhpcyBpbmZvcm1hdGlvbiBmb3IgdGhlIHN0b3J5LCB0aGUgTUMgYXBwbGljYXRpb24gY29kZSB3aWxsXG4gICAgICAvLyBuZXZlciBuZWVkIHRvIGFjY2VzcyB0aGUgaW5mb3JtYXRpb24gaW4gc3VjaCBhbiBpbmNvbnZlbmllbnQgd2F5LCBhc1xuICAgICAgLy8gRm9ybWlrIGNhbiBkZWFsIHdpdGggYSBuYW1lIGxpa2UgXCJmb28uZW5cIiBhbmQgc2V0cyB0aGUgdmFsdWUgY29ycmVjdGx5LlxuICAgICAgLy8gV2UgY2FuJ3QgdXNlIHRoaXMgYXMgd2UgYXJlbid0IGd1YXJhbnRlZWQgYSBuYW1lIGluIHRoZSBzdG9yeSBhcyB0aGUgdXNlclxuICAgICAgLy8gbWlnaHQgY2xlYXIgaXQgdXNpbmcgdGhlIGtub2IsIGFuZCB0aGVuIHdlIGNhbid0IHBhcnNlIHRoZSBsYW5ndWFnZSBmcm9tXG4gICAgICAvLyB0aGUgaW5wdXQgbmFtZSBhbnltb3JlLlxuICAgICAgLy9cbiAgICAgIGV2ZW50LnRhcmdldC5sYW5ndWFnZSA9IHByb3BzLmxhbmd1YWdlO1xuICAgICAgb25DaGFuZ2U/LihldmVudCk7XG4gICAgfSxcbiAgICBbcHJvcHMubGFuZ3VhZ2UsIG9uQ2hhbmdlXVxuICApO1xuXG4gIGlmICghcHJvcHMuaXNSZWFkT25seSkge1xuICAgIHdhcm5pbmcoXG4gICAgICB0eXBlb2YgcHJvcHMub25DaGFuZ2UgPT09ICdmdW5jdGlvbicsXG4gICAgICAnTG9jYWxpemVkVGV4dElucHV0OiBcIm9uQ2hhbmdlXCIgaXMgcmVxdWlyZWQgd2hlbiBpc1JlYWRPbmx5IGlzIG5vdCB0cnVlJ1xuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGtleT17cHJvcHMubGFuZ3VhZ2V9XG4gICAgICBjc3M9e2Nzc2BcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGB9XG4gICAgPlxuICAgICAgPGxhYmVsIGh0bWxGb3I9e3Byb3BzLmlkfSBjc3M9e2dldExhbmd1YWdlTGFiZWxTdHlsZXMocHJvcHMpfT5cbiAgICAgICAge3Byb3BzLmxhbmd1YWdlLnRvVXBwZXJDYXNlKCl9XG4gICAgICA8L2xhYmVsPlxuICAgICAgPFRleHRJbnB1dFxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgIGNzcz17Z2V0TG9jYWxpemVkSW5wdXRTdHlsZXN9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuTG9jYWxpemVkSW5wdXQuZGlzcGxheU5hbWUgPSAnTG9jYWxpemVkSW5wdXQnO1xuXG5jb25zdCBSZXF1aXJlZFZhbHVlRXJyb3JNZXNzYWdlID0gKCkgPT4gKFxuICA8RXJyb3JNZXNzYWdlPlxuICAgIDxGb3JtYXR0ZWRNZXNzYWdlIHsuLi5tZXNzYWdlc0xvY2FsaXplZElucHV0Lm1pc3NpbmdSZXF1aXJlZEZpZWxkfSAvPlxuICA8L0Vycm9yTWVzc2FnZT5cbik7XG5cblJlcXVpcmVkVmFsdWVFcnJvck1lc3NhZ2UuZGlzcGxheU5hbWUgPSAnUmVxdWlyZWRWYWx1ZUVycm9yTWVzc2FnZSc7XG5cbmNvbnN0IExvY2FsaXplZFRleHRJbnB1dCA9IChwcm9wczogVExvY2FsaXplZFRleHRJbnB1dFByb3BzKSA9PiB7XG4gIGNvbnN0IGRlZmF1bHRFeHBhbnNpb25TdGF0ZSA9XG4gICAgcHJvcHMuaGlkZUxhbmd1YWdlRXhwYW5zaW9uQ29udHJvbHMgfHxcbiAgICBwcm9wcy5kZWZhdWx0RXhwYW5kTGFuZ3VhZ2VzIHx8IC8vIGRlZmF1bHQgdG8gYGZhbHNlYCwgYmVjYXVzZSB1c2VUb2dnbGVTdGF0ZSBkZWZhdWx0cyB0byBgdHJ1ZWBcbiAgICBmYWxzZTtcblxuICBjb25zdCBbYXJlTGFuZ3VhZ2VzRXhwYW5kZWQsIHRvZ2dsZUxhbmd1YWdlc10gPSB1c2VUb2dnbGVTdGF0ZShcbiAgICBkZWZhdWx0RXhwYW5zaW9uU3RhdGVcbiAgKTtcblxuICBjb25zdCBvbkxvY2FsaXplZElucHV0VG9nZ2xlID0gdXNlQ2FsbGJhY2soXG4gICAgKCkgPT4gdG9nZ2xlTGFuZ3VhZ2VzKCksXG4gICAgW3RvZ2dsZUxhbmd1YWdlc11cbiAgKTtcblxuICBjb25zdCBsYW5ndWFnZXMgPSBzb3J0TGFuZ3VhZ2VzKFxuICAgIHByb3BzLnNlbGVjdGVkTGFuZ3VhZ2UsXG4gICAgT2JqZWN0LmtleXMocHJvcHMudmFsdWUpXG4gICk7XG5cbiAgY29uc3QgaWQgPSB1c2VGaWVsZElkKHByb3BzLmlkLCBzZXF1ZW50aWFsSWQpO1xuXG4gIGNvbnN0IGhhc0Vycm9ySW5SZW1haW5pbmdMYW5ndWFnZXMgPVxuICAgIHByb3BzLmhhc0Vycm9yIHx8XG4gICAgZ2V0SGFzRXJyb3JPblJlbWFpbmluZ0xhbmd1YWdlcyhwcm9wcy5lcnJvcnMsIHByb3BzLnNlbGVjdGVkTGFuZ3VhZ2UpO1xuXG4gIGlmIChoYXNFcnJvckluUmVtYWluaW5nTGFuZ3VhZ2VzKSB7XG4gICAgLy8gdGhpcyB1cGRhdGUgd2l0aGluIHJlbmRlciByZXBsYWNlcyB0aGUgb2xkIGBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHNgIGZ1bmN0aW9uYWxpdHlcbiAgICAvLyBodHRwczovL3JlYWN0anMub3JnL2RvY3MvaG9va3MtZmFxLmh0bWwjaG93LWRvLWktaW1wbGVtZW50LWdldGRlcml2ZWRzdGF0ZWZyb21wcm9wc1xuICAgIGlmIChoYXNFcnJvckluUmVtYWluaW5nTGFuZ3VhZ2VzICE9PSBhcmVMYW5ndWFnZXNFeHBhbmRlZCkge1xuICAgICAgdG9nZ2xlTGFuZ3VhZ2VzKCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc2hvdWxkUmVuZGVyTGFuZ3VhZ2VzQnV0dG9uID1cbiAgICBsYW5ndWFnZXMubGVuZ3RoID4gMSAmJiAhcHJvcHMuaGlkZUxhbmd1YWdlRXhwYW5zaW9uQ29udHJvbHM7XG5cbiAgaWYgKCFwcm9wcy5pc1JlYWRPbmx5KSB7XG4gICAgd2FybmluZyhcbiAgICAgIHR5cGVvZiBwcm9wcy5vbkNoYW5nZSA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICdMb2NhbGl6ZWRUZXh0SW5wdXQ6IFwib25DaGFuZ2VcIiBpcyByZXF1aXJlZCB3aGVuIGlzUmVhZE9ubHkgaXMgbm90IHRydWUnXG4gICAgKTtcbiAgfVxuXG4gIGlmIChwcm9wcy5oaWRlTGFuZ3VhZ2VFeHBhbnNpb25Db250cm9scykge1xuICAgIHdhcm5pbmcoXG4gICAgICB0eXBlb2YgcHJvcHMuZGVmYXVsdEV4cGFuZExhbmd1YWdlcyAhPT0gJ2Jvb2xlYW4nLFxuICAgICAgJ0xvY2FsaXplZFRleHRJbnB1dDogXCJkZWZhdWx0RXhwYW5kTGFuZ3VhZ2VzXCIgZG9lcyBub3QgaGF2ZSBhbnkgZWZmZWN0IHdoZW4gXCJoaWRlTGFuZ3VhZ2VFeHBhbnNpb25Db250cm9sc1wiIGlzIHNldC4nXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPENvbnN0cmFpbnRzLkhvcml6b250YWwgbWF4PXtwcm9wcy5ob3Jpem9udGFsQ29uc3RyYWludH0+XG4gICAgICA8U3RhY2sgc2NhbGU9XCJ4c1wiPlxuICAgICAgICA8U3RhY2s+XG4gICAgICAgICAge2xhbmd1YWdlcy5tYXAoKGxhbmd1YWdlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNGaXJzdExhbmd1YWdlID0gaW5kZXggPT09IDA7XG4gICAgICAgICAgICBpZiAoIWlzRmlyc3RMYW5ndWFnZSAmJiAhYXJlTGFuZ3VhZ2VzRXhwYW5kZWQpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17bGFuZ3VhZ2V9PlxuICAgICAgICAgICAgICAgIDxTdGFjayBzY2FsZT1cInhzXCI+XG4gICAgICAgICAgICAgICAgICA8TG9jYWxpemVkSW5wdXRcbiAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPXtwcm9wcy5hdXRvQ29tcGxldGV9XG4gICAgICAgICAgICAgICAgICAgIGlkPXtMb2NhbGl6ZWRUZXh0SW5wdXQuZ2V0SWQoaWQsIGxhbmd1YWdlKX1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT17TG9jYWxpemVkVGV4dElucHV0LmdldE5hbWUocHJvcHMubmFtZSwgbGFuZ3VhZ2UpfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJvcHMudmFsdWVbbGFuZ3VhZ2VdfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17cHJvcHMub25DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPXtsYW5ndWFnZX1cbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e1xuICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHByb3BzLnBsYWNlaG9sZGVyW2xhbmd1YWdlXVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkJsdXI9e3Byb3BzLm9uQmx1cn1cbiAgICAgICAgICAgICAgICAgICAgb25Gb2N1cz17cHJvcHMub25Gb2N1c31cbiAgICAgICAgICAgICAgICAgICAgaXNBdXRvZm9jdXNzZWQ9e2luZGV4ID09PSAwICYmIHByb3BzLmlzQXV0b2ZvY3Vzc2VkfVxuICAgICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkPXtwcm9wcy5pc0Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBpc1JlYWRPbmx5PXtwcm9wcy5pc1JlYWRPbmx5fVxuICAgICAgICAgICAgICAgICAgICBoYXNFcnJvcj17Qm9vbGVhbihcbiAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5oYXNFcnJvciB8fCAocHJvcHMuZXJyb3JzICYmIHByb3BzLmVycm9yc1tsYW5ndWFnZV0pXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHsuLi5jcmVhdGVMb2NhbGl6ZWREYXRhQXR0cmlidXRlcyhwcm9wcywgbGFuZ3VhZ2UpfVxuICAgICAgICAgICAgICAgICAgICAvKiBBUklBICovXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtaW52YWxpZD17cHJvcHNbJ2FyaWEtaW52YWxpZCddfVxuICAgICAgICAgICAgICAgICAgICBhcmlhLWVycm9ybWVzc2FnZT17cHJvcHNbJ2FyaWEtZXJyb3JtZXNzYWdlJ119XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAge3Byb3BzLmVycm9ycyAmJiBwcm9wcy5lcnJvcnNbbGFuZ3VhZ2VdfVxuICAgICAgICAgICAgICAgIDwvU3RhY2s+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC9TdGFjaz5cbiAgICAgICAge3Nob3VsZFJlbmRlckxhbmd1YWdlc0J1dHRvbiAmJiAoXG4gICAgICAgICAgPExvY2FsaXplZElucHV0VG9nZ2xlXG4gICAgICAgICAgICBpc09wZW49e2FyZUxhbmd1YWdlc0V4cGFuZGVkfVxuICAgICAgICAgICAgb25DbGljaz17b25Mb2NhbGl6ZWRJbnB1dFRvZ2dsZX1cbiAgICAgICAgICAgIGlzRGlzYWJsZWQ9e2FyZUxhbmd1YWdlc0V4cGFuZGVkICYmIGhhc0Vycm9ySW5SZW1haW5pbmdMYW5ndWFnZXN9XG4gICAgICAgICAgICByZW1haW5pbmdMb2NhbGl6YXRpb25zPXtsYW5ndWFnZXMubGVuZ3RoIC0gMX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9TdGFjaz5cbiAgICA8L0NvbnN0cmFpbnRzLkhvcml6b250YWw+XG4gICk7XG59O1xuXG5Mb2NhbGl6ZWRUZXh0SW5wdXQuZGlzcGxheU5hbWUgPSAnTG9jYWxpemVkVGV4dElucHV0JztcblxuTG9jYWxpemVkVGV4dElucHV0LlJlcXVpcmVkVmFsdWVFcnJvck1lc3NhZ2UgPSBSZXF1aXJlZFZhbHVlRXJyb3JNZXNzYWdlO1xuXG5Mb2NhbGl6ZWRUZXh0SW5wdXQuZGVmYXVsdFByb3BzID0ge1xuICBob3Jpem9udGFsQ29uc3RyYWludDogJ3NjYWxlJyxcbn07XG5cbkxvY2FsaXplZFRleHRJbnB1dC5nZXRJZCA9IGdldElkO1xuXG5Mb2NhbGl6ZWRUZXh0SW5wdXQuZ2V0TmFtZSA9IGdldE5hbWU7XG5cbkxvY2FsaXplZFRleHRJbnB1dC5jcmVhdGVMb2NhbGl6ZWRTdHJpbmcgPSBjcmVhdGVMb2NhbGl6ZWRTdHJpbmc7XG5cbkxvY2FsaXplZFRleHRJbnB1dC5pc0VtcHR5ID0gaXNFbXB0eTtcblxuTG9jYWxpemVkVGV4dElucHV0Lm9taXRFbXB0eVRyYW5zbGF0aW9ucyA9IG9taXRFbXB0eVRyYW5zbGF0aW9ucztcblxuTG9jYWxpemVkVGV4dElucHV0LmlzVG91Y2hlZCA9IGlzVG91Y2hlZDtcblxuZXhwb3J0IGRlZmF1bHQgTG9jYWxpemVkVGV4dElucHV0O1xuIl19 */",
  toString: _EMOTION_STRINGIFIED_CSS_ERROR__
};
const LocalizedInput = props => {
  const onChange = props.onChange;
  const handleChange = useCallback(event => {
    // We manipulate the event to add the language to the target.
    // That way the users of LocalizedTextInput's onChange can read
    // event.target.language and event.target.value to determine the next value.
    //
    // We only need this information for the story, the MC application code will
    // never need to access the information in such an inconvenient way, as
    // Formik can deal with a name like "foo.en" and sets the value correctly.
    // We can't use this as we aren't guaranteed a name in the story as the user
    // might clear it using the knob, and then we can't parse the language from
    // the input name anymore.
    //
    event.target.language = props.language;
    onChange === null || onChange === void 0 ? void 0 : onChange(event);
  }, [props.language, onChange]);
  if (!props.isReadOnly) {
    process.env.NODE_ENV !== "production" ? warning(typeof props.onChange === 'function', 'LocalizedTextInput: "onChange" is required when isReadOnly is not true') : void 0;
  }
  return jsxs("div", {
    css: _ref,
    children: [jsx("label", {
      htmlFor: props.id,
      css: getLanguageLabelStyles(props),
      children: props.language.toUpperCase()
    }), jsx(TextInput, _objectSpread(_objectSpread({}, props), {}, {
      onChange: handleChange,
      css: getLocalizedInputStyles
    }))]
  }, props.language);
};
LocalizedInput.propTypes = process.env.NODE_ENV !== "production" ? {
  id: _pt.string,
  name: _pt.string,
  autoComplete: _pt.string,
  value: _pt.string.isRequired,
  onChange: _pt.func,
  language: _pt.string.isRequired,
  onBlur: _pt.func,
  onFocus: _pt.func,
  isAutofocussed: _pt.bool,
  isDisabled: _pt.bool,
  isReadOnly: _pt.bool,
  hasError: _pt.bool,
  placeholder: _pt.string
} : {};
LocalizedInput.displayName = 'LocalizedInput';
const RequiredValueErrorMessage = () => jsx(ErrorMessage, {
  children: jsx(FormattedMessage, _objectSpread({}, messagesLocalizedInput.missingRequiredField))
});
RequiredValueErrorMessage.displayName = 'RequiredValueErrorMessage';
const LocalizedTextInput = props => {
  const defaultExpansionState = props.hideLanguageExpansionControls || props.defaultExpandLanguages ||
  // default to `false`, because useToggleState defaults to `true`
  false;
  const _useToggleState = useToggleState(defaultExpansionState),
    _useToggleState2 = _slicedToArray(_useToggleState, 2),
    areLanguagesExpanded = _useToggleState2[0],
    toggleLanguages = _useToggleState2[1];
  const onLocalizedInputToggle = useCallback(() => toggleLanguages(), [toggleLanguages]);
  const languages = sortLanguages(props.selectedLanguage, _Object$keys(props.value));
  const id = useFieldId(props.id, sequentialId);
  const hasErrorInRemainingLanguages = props.hasError || getHasErrorOnRemainingLanguages(props.errors, props.selectedLanguage);
  if (hasErrorInRemainingLanguages) {
    // this update within render replaces the old `getDerivedStateFromProps` functionality
    // https://reactjs.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops
    if (hasErrorInRemainingLanguages !== areLanguagesExpanded) {
      toggleLanguages();
    }
  }
  const shouldRenderLanguagesButton = languages.length > 1 && !props.hideLanguageExpansionControls;
  if (!props.isReadOnly) {
    process.env.NODE_ENV !== "production" ? warning(typeof props.onChange === 'function', 'LocalizedTextInput: "onChange" is required when isReadOnly is not true') : void 0;
  }
  if (props.hideLanguageExpansionControls) {
    process.env.NODE_ENV !== "production" ? warning(typeof props.defaultExpandLanguages !== 'boolean', 'LocalizedTextInput: "defaultExpandLanguages" does not have any effect when "hideLanguageExpansionControls" is set.') : void 0;
  }
  return jsx(Constraints.Horizontal, {
    max: props.horizontalConstraint,
    children: jsxs(Stack, {
      scale: "xs",
      children: [jsx(Stack, {
        children: _mapInstanceProperty(languages).call(languages, (language, index) => {
          const isFirstLanguage = index === 0;
          if (!isFirstLanguage && !areLanguagesExpanded) return null;
          return jsx("div", {
            children: jsxs(Stack, {
              scale: "xs",
              children: [jsx(LocalizedInput, _objectSpread(_objectSpread({
                autoComplete: props.autoComplete,
                id: LocalizedTextInput.getId(id, language),
                name: LocalizedTextInput.getName(props.name, language),
                value: props.value[language],
                onChange: props.onChange,
                language: language,
                placeholder: props.placeholder ? props.placeholder[language] : undefined,
                onBlur: props.onBlur,
                onFocus: props.onFocus,
                isAutofocussed: index === 0 && props.isAutofocussed,
                isDisabled: props.isDisabled,
                isReadOnly: props.isReadOnly,
                hasError: Boolean(props.hasError || props.errors && props.errors[language])
              }, createLocalizedDataAttributes(props, language)), {}, {
                /* ARIA */
                "aria-invalid": props['aria-invalid'],
                "aria-errormessage": props['aria-errormessage']
              })), props.errors && props.errors[language]]
            })
          }, language);
        })
      }), shouldRenderLanguagesButton && jsx(LocalizedInputToggle, {
        isOpen: areLanguagesExpanded,
        onClick: onLocalizedInputToggle,
        isDisabled: areLanguagesExpanded && hasErrorInRemainingLanguages,
        remainingLocalizations: languages.length - 1
      })]
    })
  });
};
LocalizedTextInput.propTypes = process.env.NODE_ENV !== "production" ? {
  id: _pt.string,
  name: _pt.string,
  autoComplete: _pt.string,
  'aria-invalid': _pt.bool,
  'aria-errormessage': _pt.string,
  value: _pt.objectOf(_pt.string).isRequired,
  onChange: _pt.func,
  selectedLanguage: _pt.string.isRequired,
  onBlur: _pt.func,
  onFocus: _pt.func,
  hideLanguageExpansionControls: _pt.bool,
  defaultExpandLanguages: _pt.bool,
  isAutofocussed: _pt.bool,
  isDisabled: _pt.bool,
  isReadOnly: _pt.bool,
  placeholder: _pt.objectOf(_pt.string),
  horizontalConstraint: _pt.oneOf([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 'scale', 'auto']),
  hasError: _pt.bool,
  errors: _pt.objectOf(_pt.string)
} : {};
LocalizedTextInput.displayName = 'LocalizedTextInput';
LocalizedTextInput.RequiredValueErrorMessage = RequiredValueErrorMessage;
LocalizedTextInput.defaultProps = {
  horizontalConstraint: 'scale'
};
LocalizedTextInput.getId = getId;
LocalizedTextInput.getName = getName;
LocalizedTextInput.createLocalizedString = createLocalizedString;
LocalizedTextInput.isEmpty = isEmpty;
LocalizedTextInput.omitEmptyTranslations = omitEmptyTranslations;
LocalizedTextInput.isTouched = isTouched;
var LocalizedTextInput$1 = LocalizedTextInput;

// NOTE: This string will be replaced on build time with the package version.
var version = "16.11.0";

export { LocalizedTextInput$1 as default, version };
